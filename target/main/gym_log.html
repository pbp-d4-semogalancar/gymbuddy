{% extends 'base.html' %}
{% load static %}

{% block content %}
<h1 class="text-3xl font-bold mb-4">My Gym Activity Log</h1>

<div class="bg-gray-100 p-4 rounded-lg mb-6">
    <h2 class="text-xl font-semibold">Weekly Progress</h2>
    <p>Completion: <span class="font-bold text-2xl">{{ percent_complete }}%</span></p>
</div>

<button 
    data-modal-target="#generic-modal" 
    data-load-url="{% url 'targetlog:load_add_target_form' %}"
    class="bg-gray-900 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-700">
    + Add Workout Plan
</button>

<hr class="my-6">

<div id="workout-log-list" class="space-y-4">
    {% for target in targets %}
        <div class="p-4 border rounded-lg {% if target.is_completed %}bg-gray-50 text-gray-500{% else %}bg-white{% endif %}">
            <h3 class="font-bold text-lg">{{ target.activity.name }}</h3>
            <p>{{ target.reps }} reps | Planned: {{ target.planned_date }}</p>
            
            {% if target.is_completed %}
                <p class="text-sm italic">Completed: {{ target.description }}</p>
            {% else %}
                <button 
                    data-modal-target="#generic-modal" 
                    data-load-url="{% url 'targetlog:load_update_log_form' target.id %}"
                    class="mt-2 bg-green-600 text-white py-1 px-3 rounded-md text-sm hover:bg-green-700">
                    Mark as Done
                </button>
            {% endif %}
        </div>
    {% empty %}
        <p>Belum ada rencana latihan.</p>
    {% endfor %}
</div>
{% endblock content %}